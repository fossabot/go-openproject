package openproject

import (
	"fmt"
	"net/http"
	"testing"
)

const testWorkPackageGETResponse = `{"derivedStartDate":null,"derivedDueDate":null,"_embedded":{"attachments":{"_type":"Collection","total":0,"count":0,"_embedded":{"elements":[]},"_links":{"self":{"href":"/api/v3/work_packages/36350/attachments"}}},"relations":{"_type":"Collection","total":0,"count":0,"_embedded":{"elements":[]},"_links":{"self":{"href":"/api/v3/work_packages/36350/relations"}}},"type":{"_type":"Type","id":1,"name":"Bug","color":"#FF0013","position":4,"isDefault":false,"isMilestone":false,"createdAt":"2013-11-13T13:11:21Z","updatedAt":"2020-11-25T13:57:59Z","_links":{"self":{"href":"/api/v3/types/1","title":"Bug"}}},"priority":{"_type":"Priority","id":4,"name":"Medium","position":2,"color":"#51CF66","isDefault":true,"isActive":true,"_links":{"self":{"href":"/api/v3/priorities/4","title":"Medium"}}},"project":{"_type":"Project","id":14,"identifier":"openproject","name":"OpenProject","active":true,"public":true,"description":{"format":"markdown","raw":"Building the best open source project collaboration software.","html":"<p class=\"op-uc-p\">Building the best open source project collaboration software.</p>"},"createdAt":"2012-09-21T13:37:39Z","updatedAt":"2021-02-16T12:50:23Z","status":null,"statusExplanation":{"format":"markdown","raw":null,"html":""},"_links":{"self":{"href":"/api/v3/projects/14","title":"OpenProject"},"workPackages":{"href":"/api/v3/projects/14/work_packages"},"categories":{"href":"/api/v3/projects/14/categories"},"versions":{"href":"/api/v3/projects/14/versions"},"types":{"href":"/api/v3/projects/14/types"},"schema":{"href":"/api/v3/projects/schema"},"customField105":{"href":null,"title":null},"parent":{"href":null,"title":null}}},"status":{"_type":"Status","id":63,"name":"prioritized","isClosed":false,"color":"#D90000","isDefault":false,"isReadonly":false,"defaultDoneRatio":null,"position":24,"_links":{"self":{"href":"/api/v3/statuses/63","title":"prioritized"}}},"author":{"_type":"User","id":67841,"name":"Matthias Laux","avatar":"https://secure.gravatar.com/avatar/c2b652a24efa0e54eff27b1b70e58518?default=404&secure=true","_links":{"self":{"href":"/api/v3/users/67841","title":"Matthias Laux"},"showUser":{"href":"/users/67841","type":"text/html"}}},"customActions":[]},"_type":"WorkPackage","id":36350,"lockVersion":3,"subject":"Default work package type can't be changed","description":{"format":"markdown","raw":"### **Steps to reproduce:**\n\n1.  Go to /types\n2.  Move a random type to the top of the list, using the arrows\n3.  Go to a project&#39;s work package list and create a new work package, using the shortcut (type &quot;nwp&quot;) (or create a new work package using the &quot;+ Create new work package link&quot;)\n\n### **Actual Behavior**\n\nThe new work package is still of the type task\n\n### **Expected Behavior**\n\nThe work package type I moved to the top of the list is the current default type and will be selected when I create a new work package.","html":"<h3 id=\"steps-to-reproduce\" class=\"op-uc-h3\">\n<strong>Steps to reproduce:</strong><a class=\"op-uc-link_permalink icon-link op-uc-link\" aria-hidden=\"true\" href=\"#steps-to-reproduce\"></a>\n</h3>\n<ol class=\"op-uc-list\">\n<li class=\"op-uc-list--item\">Go to /types</li>\n<li class=\"op-uc-list--item\">Move a random type to the top of the list, using the arrows</li>\n<li class=\"op-uc-list--item\">Go to a project's work package list and create a new work package, using the shortcut (type \"nwp\") (or create a new work package using the \"+ Create new work package link\")</li>\n</ol>\n<h3 id=\"actual-behavior\" class=\"op-uc-h3\">\n<strong>Actual Behavior</strong><a class=\"op-uc-link_permalink icon-link op-uc-link\" aria-hidden=\"true\" href=\"#actual-behavior\"></a>\n</h3>\n<p class=\"op-uc-p\">The new work package is still of the type task</p>\n<h3 id=\"expected-behavior\" class=\"op-uc-h3\">\n<strong>Expected Behavior</strong><a class=\"op-uc-link_permalink icon-link op-uc-link\" aria-hidden=\"true\" href=\"#expected-behavior\"></a>\n</h3>\n<p class=\"op-uc-p\">The work package type I moved to the top of the list is the current default type and will be selected when I create a new work package.</p>"},"scheduleManually":false,"startDate":null,"dueDate":null,"estimatedTime":null,"derivedEstimatedTime":null,"createdAt":"2021-02-23T11:09:23Z","updatedAt":"2021-02-23T11:21:27Z","position":1,"storyPoints":null,"remainingTime":null,"customField108":true,"customField130":null,"customField114":null,"_links":{"attachments":{"href":"/api/v3/work_packages/36350/attachments"},"prepareAttachment":{"href":"/api/v3/work_packages/36350/attachments/prepare","method":"post"},"self":{"href":"/api/v3/work_packages/36350","title":"Default work package type can't be changed"},"schema":{"href":"/api/v3/work_packages/schemas/14-1"},"availableRelationCandidates":{"href":"/api/v3/work_packages/36350/available_relation_candidates","title":"Potential work packages to relate to"},"activities":{"href":"/api/v3/work_packages/36350/activities"},"relations":{"href":"/api/v3/work_packages/36350/relations"},"revisions":{"href":"/api/v3/work_packages/36350/revisions"},"previewMarkup":{"href":"/api/v3/render/markdown?context=/api/v3/work_packages/36350","method":"post"},"category":{"href":null},"type":{"href":"/api/v3/types/1","title":"Bug"},"priority":{"href":"/api/v3/priorities/4","title":"Medium"},"project":{"href":"/api/v3/projects/14","title":"OpenProject"},"status":{"href":"/api/v3/statuses/63","title":"prioritized"},"author":{"href":"/api/v3/users/67841","title":"Matthias Laux"},"responsible":{"href":null},"assignee":{"href":null},"version":{"href":null},"customField1":[{"title":"Work packages","href":"/api/v3/custom_options/32"},{"title":"Administration","href":"/api/v3/custom_options/396"}],"customField5":{"href":null,"title":null},"customField107":[],"customField102":{"href":null,"title":null},"customField127":[],"customField129":{"href":null,"title":null},"ancestors":[],"parent":{"href":null,"title":null},"customActions":[]}}`
const testWorkPackagePOSTResponse = `{"derivedStartDate":null,"derivedDueDate":null,"_embedded":{"attachments":{"_type":"Collection","total":0,"count":0,"_embedded":{"elements":[]},"_links":{"self":{"href":"/api/v3/work_packages/38/attachments"}}},"relations":{"_type":"Collection","total":0,"count":0,"_embedded":{"elements":[]},"_links":{"self":{"href":"/api/v3/work_packages/38/relations"}}},"type":{"_type":"Type","id":1,"name":"Task","color":"#1A67A3","position":1,"isDefault":true,"isMilestone":false,"createdAt":"2021-02-18T10:10:30Z","updatedAt":"2021-02-18T10:10:30Z","_links":{"self":{"href":"/api/v3/types/1","title":"Task"}}},"priority":{"_type":"Priority","id":8,"name":"Normal","position":2,"color":"#74C0FC","isDefault":true,"isActive":true,"_links":{"self":{"href":"/api/v3/priorities/8","title":"Normal"}}},"project":{"_type":"Project","id":1,"identifier":"demo-project","name":"Demo project","active":true,"public":true,"description":{"format":"markdown","raw":"This is a short summary of the goals of this demo project.","html":"<p class=\"op-uc-p\">This is a short summary of the goals of this demo project.</p>"},"createdAt":"2021-02-18T10:10:47Z","updatedAt":"2021-02-18T10:10:47Z","status":"on track","statusExplanation":{"format":"markdown","raw":"All tasks are on schedule. The people involved know their tasks. The system is completely set up.","html":"<p class=\"op-uc-p\">All tasks are on schedule. The people involved know their tasks. The system is completely set up.</p>"},"_links":{"self":{"href":"/api/v3/projects/1","title":"Demo project"},"createWorkPackage":{"href":"/api/v3/projects/1/work_packages/form","method":"post"},"createWorkPackageImmediately":{"href":"/api/v3/projects/1/work_packages","method":"post"},"workPackages":{"href":"/api/v3/projects/1/work_packages"},"categories":{"href":"/api/v3/projects/1/categories"},"versions":{"href":"/api/v3/projects/1/versions"},"memberships":{"href":"/api/v3/memberships?filters=%5B%7B%22project%22%3A%7B%22operator%22%3A%22%3D%22%2C%22values%22%3A%5B%221%22%5D%7D%7D%5D"},"types":{"href":"/api/v3/projects/1/types"},"update":{"href":"/api/v3/projects/1/form","method":"post"},"updateImmediately":{"href":"/api/v3/projects/1","method":"patch"},"delete":{"href":"/api/v3/projects/1","method":"delete"},"schema":{"href":"/api/v3/projects/schema"},"parent":{"href":null,"title":null}}},"status":{"_type":"Status","id":1,"name":"New","isClosed":false,"color":"#1098AD","isDefault":true,"isReadonly":false,"defaultDoneRatio":null,"position":1,"_links":{"self":{"href":"/api/v3/statuses/1","title":"New"}}},"author":{"_type":"User","id":1,"name":"Manuelbcd","createdAt":"2021-02-18T10:10:46Z","updatedAt":"2021-02-23T09:17:44Z","login":"user@acme.com","admin":true,"firstName":"Manuel","lastName":"Bcd","email":"user@acme.com","avatar":"https://secure.gravatar.com/avatar/af5c1e5d637c5bdf7be72b0904272a89?default=404&secure=true","status":"active","identityUrl":null,"language":"en","_links":{"self":{"href":"/api/v3/users/1","title":"Manuelbcd"},"memberships":{"href":"/api/v3/memberships?filters=%5B%7B%22principal%22%3A%7B%22operator%22%3A%22%3D%22%2C%22values%22%3A%5B%221%22%5D%7D%7D%5D","title":"Members"},"showUser":{"href":"/users/1","type":"text/html"},"updateImmediately":{"href":"/api/v3/users/1","title":"Update user@acme.com","method":"patch"},"lock":{"href":"/api/v3/users/1/lock","title":"Set lock on user@acme.com","method":"post"}}},"customActions":[]},"_type":"WorkPackage","id":38,"lockVersion":0,"subject":"subject34","description":{"format":"markdown","raw":"esto es una prueba","html":"<p class=\"op-uc-p\">esto es una prueba</p>"},"scheduleManually":false,"startDate":null,"dueDate":null,"estimatedTime":null,"derivedEstimatedTime":null,"percentageDone":0,"createdAt":"2021-02-23T15:11:35Z","updatedAt":"2021-02-23T15:11:35Z","_links":{"attachments":{"href":"/api/v3/work_packages/38/attachments"},"prepareAttachment":{"href":"/api/v3/work_packages/38/attachments/prepare","method":"post"},"addAttachment":{"href":"/api/v3/work_packages/38/attachments","method":"post"},"self":{"href":"/api/v3/work_packages/38","title":"subject34"},"update":{"href":"/api/v3/work_packages/38/form","method":"post"},"schema":{"href":"/api/v3/work_packages/schemas/1-1"},"updateImmediately":{"href":"/api/v3/work_packages/38","method":"patch"},"delete":{"href":"/api/v3/work_packages/38","method":"delete"},"move":{"href":"/work_packages/38/move/new","type":"text/html","title":"Move subject34"},"copy":{"href":"/work_packages/38/copy","title":"Copy subject34"},"pdf":{"href":"/work_packages/38.pdf","type":"application/pdf","title":"Export as PDF"},"atom":{"href":"/work_packages/38.atom","type":"application/rss+xml","title":"Atom feed"},"availableRelationCandidates":{"href":"/api/v3/work_packages/38/available_relation_candidates","title":"Potential work packages to relate to"},"customFields":{"href":"/projects/demo-project/settings/custom_fields","type":"text/html","title":"Custom fields"},"configureForm":{"href":"/types/1/edit?tab=form_configuration","type":"text/html","title":"Configure form"},"activities":{"href":"/api/v3/work_packages/38/activities"},"availableWatchers":{"href":"/api/v3/work_packages/38/available_watchers"},"relations":{"href":"/api/v3/work_packages/38/relations"},"revisions":{"href":"/api/v3/work_packages/38/revisions"},"watchers":{"href":"/api/v3/work_packages/38/watchers"},"addWatcher":{"href":"/api/v3/work_packages/38/watchers","method":"post","payload":{"user":{"href":"/api/v3/users/{user_id}"}},"templated":true},"removeWatcher":{"href":"/api/v3/work_packages/38/watchers/{user_id}","method":"delete","templated":true},"addRelation":{"href":"/api/v3/work_packages/38/relations","method":"post","title":"Add relation"},"addChild":{"href":"/api/v3/projects/demo-project/work_packages","method":"post","title":"Add child of subject34"},"changeParent":{"href":"/api/v3/work_packages/38","method":"patch","title":"Change parent of subject34"},"addComment":{"href":"/api/v3/work_packages/38/activities","method":"post","title":"Add comment"},"previewMarkup":{"href":"/api/v3/render/markdown?context=/api/v3/work_packages/38","method":"post"},"category":{"href":null},"type":{"href":"/api/v3/types/1","title":"Task"},"priority":{"href":"/api/v3/priorities/8","title":"Normal"},"project":{"href":"/api/v3/projects/1","title":"Demo project"},"status":{"href":"/api/v3/statuses/1","title":"New"},"author":{"href":"/api/v3/users/1","title":"Manuelbcd"},"responsible":{"href":null},"assignee":{"href":null},"version":{"href":null},"watch":{"href":"/api/v3/work_packages/38/watchers","method":"post","payload":{"user":{"href":"/api/v3/users/1"}}},"ancestors":[],"parent":{"href":null,"title":null},"customActions":[]}}`
const testWorkPackageGETListResponse = `{"_type":"WorkPackageCollection","total":2,"count":2,"pageSize":50,"offset":1,"_embedded":{"elements":[{"derivedStartDate":null,"derivedDueDate":null,"_type":"WorkPackage","id":26077,"lockVersion":17,"subject":"Inlinecreation:allcellsineditmode(notonlysubject)","description":{"format":"markdown","raw":"**Currentbehavior**\n\n*Onlythesubjectfieldisopen.Allotherfieldsareinshowview.\n*Whencreatinganewworkpackagethedefaultworkpackagetypeispreselected.\n\n![](\/api\/v3\/attachments\/17114\/content)\n\n**Expected**\n\n*Makeallcellseditable\n\n![](\/api\/v3\/attachments\/17115\/content)\n\n*Thereisasavebuttonandacancelbuttonontheleft(atthepositionofthe+-Button)\n*Wemovethecancelbuttonalsototheleft.\n\n![](\/attachments\/12050\/1502374752425-0.png)\n\n**Tobedefined**\n\n*Pressinganenterbuttonsavestheworkpackage.\n*WhathappensifthereisnoemptyIDcolumnontheleft?","html":"<pclass=\"op-uc-p\"><strong>Currentbehavior<\/strong><\/p>\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Onlythesubjectfieldisopen.Allotherfieldsareinshowview.<\/li>\n<liclass=\"op-uc-list--item\">Whencreatinganewworkpackagethedefaultworkpackagetypeispreselected.<\/li>\n<\/ul>\n<pclass=\"op-uc-p\"><figureclass=\"op-uc-figure\"><divclass=\"op-uc-figure--content\"><imgsrc=\"\/api\/v3\/attachments\/17114\/content\"alt=\"\"class=\"op-uc-image\"><\/div><\/figure><\/p>\n<pclass=\"op-uc-p\"><strong>Expected<\/strong><\/p>\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Makeallcellseditable<\/li>\n<\/ul>\n<pclass=\"op-uc-p\"><figureclass=\"op-uc-figure\"><divclass=\"op-uc-figure--content\"><imgsrc=\"\/api\/v3\/attachments\/17115\/content\"alt=\"\"class=\"op-uc-image\"><\/div><\/figure><\/p>\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Thereisasavebuttonandacancelbuttonontheleft(atthepositionofthe+-Button)<\/li>\n<liclass=\"op-uc-list--item\">Wemovethecancelbuttonalsototheleft.<\/li>\n<\/ul>\n<pclass=\"op-uc-p\"><figureclass=\"op-uc-figure\"><divclass=\"op-uc-figure--content\"><imgsrc=\"\/attachments\/12050\/1502374752425-0.png\"alt=\"\"class=\"op-uc-image\"><\/div><\/figure><\/p>\n<pclass=\"op-uc-p\"><strong>Tobedefined<\/strong><\/p>\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Pressinganenterbuttonsavestheworkpackage.<\/li>\n<liclass=\"op-uc-list--item\">WhathappensifthereisnoemptyIDcolumnontheleft?<\/li>\n<\/ul>"},"scheduleManually":false,"startDate":null,"dueDate":null,"estimatedTime":null,"derivedEstimatedTime":null,"createdAt":"2017-08-10T14:15:59Z","updatedAt":"2020-11-25T07:55:46Z","position":467,"storyPoints":null,"remainingTime":null,"customField130":1,"customField114":10,"customField108":null,"_links":{"attachments":{"href":"\/api\/v3\/work_packages\/26077\/attachments"},"prepareAttachment":{"href":"\/api\/v3\/work_packages\/26077\/attachments\/prepare","method":"post"},"self":{"href":"\/api\/v3\/work_packages\/26077","title":"Inlinecreation:allcellsineditmode(notonlysubject)"},"schema":{"href":"\/api\/v3\/work_packages\/schemas\/14-6"},"availableRelationCandidates":{"href":"\/api\/v3\/work_packages\/26077\/available_relation_candidates","title":"Potentialworkpackagestorelateto"},"activities":{"href":"\/api\/v3\/work_packages\/26077\/activities"},"relations":{"href":"\/api\/v3\/work_packages\/26077\/relations"},"revisions":{"href":"\/api\/v3\/work_packages\/26077\/revisions"},"previewMarkup":{"href":"\/api\/v3\/render\/markdown?context=\/api\/v3\/work_packages\/26077","method":"post"},"category":{"href":null},"type":{"href":"\/api\/v3\/types\/6","title":"Feature"},"priority":{"href":"\/api\/v3\/priorities\/4","title":"Medium"},"project":{"href":"\/api\/v3\/projects\/14","title":"OpenProject"},"status":{"href":"\/api\/v3\/statuses\/21","title":"inspecification"},"author":{"href":"\/api\/v3\/users\/3","title":"NielsLindenthal"},"responsible":{"href":null},"assignee":{"href":null},"version":{"href":"\/api\/v3\/versions\/26","title":"WishList"},"customField1":[],"customField110":{"title":"10.0=Impactsthevastmajority(~80%orgreater)","href":"\/api\/v3\/custom_options\/413"},"customField111":{"title":"Low=0.5x","href":"\/api\/v3\/custom_options\/421"},"customField112":{"title":"High=100%","href":"\/api\/v3\/custom_options\/423"},"customField113":{"title":"0.5(M=1-4weeks)","href":"\/api\/v3\/custom_options\/428"},"customField102":{"href":null,"title":null},"customField129":{"href":null,"title":null},"customField127":[],"ancestors":[],"parent":{"href":null,"title":null},"customActions":[]}},{"derivedStartDate":null,"derivedDueDate":null,"_type":"WorkPackage","id":30105,"lockVersion":30,"subject":"MultipleAssigneeswithoutgroupcreation","description":{"format":"markdown","raw":"#UserProblem\n\n##User\n\n_Whatpersona,personasegment,orcustomertypeexperiencestheproblemmostacutely?_\n\n*Projectmanager\n*Projectmember\n\n##Problem\n\n_Whatproblemorjobdoestheuserhave?_\n\n*Thereareworkpackagesthathavemultipleassignees.\n*Pairprogrammingonafeature\n*Constructionworklikepaintinganentirefloor.\n*Requirementsworkshopwithmultipleusers\n*....\n\n##Pain\n\n_Whatistheprimaryworkaroundthatusersperformthatwecouldremoveorreplace?Whyisitpainful?_\n\n*Addingcustomfieldsoftypeuser.\n*Difficulttounderstand.\n*Notlinkedwithnotifcations\n*Complexconfiguration\n\n##Solution\n\n*Allowtoaddmultipleassigneesforaworkpackage.\n*Adaptgroupingbyassignees\n*Workpackagestable\n*Charts\n*Adaptfilters\n*Adaptcostreports\n*##32579\n*Adaptnotifications\n*Bulkedit\n\n##OutofScopefortheMVC\n\n_WhatshouldNOTbeintheminimalviablechange,andcanbeconsideredforfutureiterations?Why?Pleaseorderthembyimportance._\n\n*Changetothefilter:Itisnotpossibletofilterforworkpackagesthathavemultipleassignees(allworkpackagesassignedtoPersonAANDPersonB).\n*Allowformultipleassigneesbycustomactions.\n*Adaptbulkedittoallowformultipleassignees\n*Groupbycustomfieldsoftypeuser\n\n##Differentiation\n\n_Whatdoyoubelievewilldifferentiateusfromthecurrentexperienceorcompetitiveexperiences?_\n\n*Issuestracker\n*Redminedoesnotsupportthis.\n*Jiradoesnotsupportthis([docs](https:\/\/confluence.atlassian.com\/jira\/how-do-i-assign-issues-to-multiple-users-207489749.html)).\n\n##Nextiteration\n\n_Whatisthenextsolutionthatwouldallowustoreleasemeaningfulcustomervaluequickly?_\n\n*...\n*\n\n\n#LaunchandGrowth\n\n##Measures\n\n_Howwillyouknowyousolvedtheproblem?Pleaselistmeasurable,quantitativeindicators(preferred)orqualitativewaysyouplanonassessingthesolution?_\n\n*...\n\n##Messaging\n\n_Ifyouweretowriteapressrelease,howwouldyoudescribethevaluetocustomers?_\n\n<figureclass=\"tableop-uc-figure_align-centerop-uc-figure\"><tableclass=\"op-uc-table\"><tbody><trclass=\"op-uc-table--row\"><thclass=\"op-uc-table--cellop-uc-table--cell_head\">Headline<\/th><tdclass=\"op-uc-table--cell\"><\/td><\/tr><trclass=\"op-uc-table--row\"><thclass=\"op-uc-table--cellop-uc-table--cell_head\">FirstParagraph<\/th><tdclass=\"op-uc-table--cell\"><\/td><\/tr><trclass=\"op-uc-table--row\"><thclass=\"op-uc-table--cellop-uc-table--cell_head\">CustomerQuote<\/th><tdclass=\"op-uc-table--cell\"><\/td><\/tr><\/tbody><\/table><\/figure>\n\n##Gotomarket\n\n_Howareyouplanningongettingthisintousers'hands?_","html":"<h1id=\"user-problem\"class=\"op-uc-h1\">UserProblem<aclass=\"op-uc-link_permalinkicon-linkop-uc-link\"aria-hidden=\"true\"href=\"#user-problem\"><\/a>\n<\/h1>\n<h2id=\"user\"class=\"op-uc-h2\">User<aclass=\"op-uc-link_permalinkicon-linkop-uc-link\"aria-hidden=\"true\"href=\"#user\"><\/a>\n<\/h2>\n<pclass=\"op-uc-p\"><em>Whatpersona,personasegment,orcustomertypeexperiencestheproblemmostacutely?<\/em><\/p>\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Projectmanager<\/li>\n<liclass=\"op-uc-list--item\">Projectmember<\/li>\n<\/ul>\n<h2id=\"problem\"class=\"op-uc-h2\">Problem<aclass=\"op-uc-link_permalinkicon-linkop-uc-link\"aria-hidden=\"true\"href=\"#problem\"><\/a>\n<\/h2>\n<pclass=\"op-uc-p\"><em>Whatproblemorjobdoestheuserhave?<\/em><\/p>\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Thereareworkpackagesthathavemultipleassignees.\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Pairprogrammingonafeature<\/li>\n<liclass=\"op-uc-list--item\">Constructionworklikepaintinganentirefloor.<\/li>\n<liclass=\"op-uc-list--item\">Requirementsworkshopwithmultipleusers<\/li>\n<liclass=\"op-uc-list--item\">....<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<h2id=\"pain\"class=\"op-uc-h2\">Pain<aclass=\"op-uc-link_permalinkicon-linkop-uc-link\"aria-hidden=\"true\"href=\"#pain\"><\/a>\n<\/h2>\n<pclass=\"op-uc-p\"><em>Whatistheprimaryworkaroundthatusersperformthatwecouldremoveorreplace?Whyisitpainful?<\/em><\/p>\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Addingcustomfieldsoftypeuser.\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Difficulttounderstand.<\/li>\n<liclass=\"op-uc-list--item\">Notlinkedwithnotifcations<\/li>\n<liclass=\"op-uc-list--item\">Complexconfiguration<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<h2id=\"solution\"class=\"op-uc-h2\">Solution<aclass=\"op-uc-link_permalinkicon-linkop-uc-link\"aria-hidden=\"true\"href=\"#solution\"><\/a>\n<\/h2>\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Allowtoaddmultipleassigneesforaworkpackage.<\/li>\n<liclass=\"op-uc-list--item\">Adaptgroupingbyassignees\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Workpackagestable<\/li>\n<liclass=\"op-uc-list--item\">Charts<\/li>\n<\/ul>\n<\/li>\n<liclass=\"op-uc-list--item\">Adaptfilters<\/li>\n<liclass=\"op-uc-list--item\">Adaptcostreports\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\"><macroclass=\"macro--wp-quickinfo\"data-id=\"32579\"data-detailed=\"false\"><\/macro><\/li>\n<\/ul>\n<\/li>\n<liclass=\"op-uc-list--item\">Adaptnotifications<\/li>\n<liclass=\"op-uc-list--item\">Bulkedit<\/li>\n<\/ul>\n<h2id=\"out-of-scope-for-the-mvc\"class=\"op-uc-h2\">OutofScopefortheMVC<aclass=\"op-uc-link_permalinkicon-linkop-uc-link\"aria-hidden=\"true\"href=\"#out-of-scope-for-the-mvc\"><\/a>\n<\/h2>\n<pclass=\"op-uc-p\"><em>WhatshouldNOTbeintheminimalviablechange,andcanbeconsideredforfutureiterations?Why?Pleaseorderthembyimportance.<\/em><\/p>\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Changetothefilter:Itisnotpossibletofilterforworkpackagesthathavemultipleassignees(allworkpackagesassignedtoPersonAANDPersonB).<\/li>\n<liclass=\"op-uc-list--item\">Allowformultipleassigneesbycustomactions.<\/li>\n<liclass=\"op-uc-list--item\">Adaptbulkedittoallowformultipleassignees<\/li>\n<liclass=\"op-uc-list--item\">Groupbycustomfieldsoftypeuser<\/li>\n<\/ul>\n<h2id=\"differentiation\"class=\"op-uc-h2\">Differentiation<aclass=\"op-uc-link_permalinkicon-linkop-uc-link\"aria-hidden=\"true\"href=\"#differentiation\"><\/a>\n<\/h2>\n<pclass=\"op-uc-p\"><em>Whatdoyoubelievewilldifferentiateusfromthecurrentexperienceorcompetitiveexperiences?<\/em><\/p>\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Issuestracker\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">Redminedoesnotsupportthis.<\/li>\n<liclass=\"op-uc-list--item\">Jiradoesnotsupportthis(<ahref=\"https:\/\/confluence.atlassian.com\/jira\/how-do-i-assign-issues-to-multiple-users-207489749.html\"rel=\"noopenernoreferrer\"class=\"op-uc-link\">docs<\/a>).<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<h2id=\"next-iteration\"class=\"op-uc-h2\">Nextiteration<aclass=\"op-uc-link_permalinkicon-linkop-uc-link\"aria-hidden=\"true\"href=\"#next-iteration\"><\/a>\n<\/h2>\n<pclass=\"op-uc-p\"><em>Whatisthenextsolutionthatwouldallowustoreleasemeaningfulcustomervaluequickly?<\/em><\/p>\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">...<\/li>\n<liclass=\"op-uc-list--item\">\n<\/ul>\n<h1id=\"launch-and-growth\"class=\"op-uc-h1\">LaunchandGrowth<aclass=\"op-uc-link_permalinkicon-linkop-uc-link\"aria-hidden=\"true\"href=\"#launch-and-growth\"><\/a>\n<\/h1>\n<h2id=\"measures\"class=\"op-uc-h2\">Measures<aclass=\"op-uc-link_permalinkicon-linkop-uc-link\"aria-hidden=\"true\"href=\"#measures\"><\/a>\n<\/h2>\n<pclass=\"op-uc-p\"><em>Howwillyouknowyousolvedtheproblem?Pleaselistmeasurable,quantitativeindicators(preferred)orqualitativewaysyouplanonassessingthesolution?<\/em><\/p>\n<ulclass=\"op-uc-list\">\n<liclass=\"op-uc-list--item\">...<\/li>\n<\/ul>\n<h2id=\"messaging\"class=\"op-uc-h2\">Messaging<aclass=\"op-uc-link_permalinkicon-linkop-uc-link\"aria-hidden=\"true\"href=\"#messaging\"><\/a>\n<\/h2>\n<pclass=\"op-uc-p\"><em>Ifyouweretowriteapressrelease,howwouldyoudescribethevaluetocustomers?<\/em><\/p>\n<figureclass=\"tableop-uc-figure_align-centerop-uc-figure\"><divclass=\"op-uc-figure--content\"><tableclass=\"op-uc-table\"><tbody>\n<trclass=\"op-uc-table--row\">\n<thclass=\"op-uc-table--cellop-uc-table--cell_head\">Headline<\/th>\n<tdclass=\"op-uc-table--cell\"><\/td>\n<\/tr>\n<trclass=\"op-uc-table--row\">\n<thclass=\"op-uc-table--cellop-uc-table--cell_head\">FirstParagraph<\/th>\n<tdclass=\"op-uc-table--cell\"><\/td>\n<\/tr>\n<trclass=\"op-uc-table--row\">\n<thclass=\"op-uc-table--cellop-uc-table--cell_head\">CustomerQuote<\/th>\n<tdclass=\"op-uc-table--cell\"><\/td>\n<\/tr>\n<\/tbody><\/table><\/div><\/figure>\n<h2id=\"go-to-market\"class=\"op-uc-h2\">Gotomarket<aclass=\"op-uc-link_permalinkicon-linkop-uc-link\"aria-hidden=\"true\"href=\"#go-to-market\"><\/a>\n<\/h2>\n<pclass=\"op-uc-p\"><em>Howareyouplanningongettingthisintousers'hands?<\/em><\/p>"},"scheduleManually":false,"startDate":null,"dueDate":null,"estimatedTime":null,"derivedEstimatedTime":null,"createdAt":"2019-04-26T00:39:03Z","updatedAt":"2021-02-25T04:51:02Z","position":1,"storyPoints":null,"remainingTime":null,"customField130":23,"customField114":4,"customField108":true,"_links":{"attachments":{"href":"\/api\/v3\/work_packages\/30105\/attachments"},"prepareAttachment":{"href":"\/api\/v3\/work_packages\/30105\/attachments\/prepare","method":"post"},"self":{"href":"\/api\/v3\/work_packages\/30105","title":"MultipleAssigneeswithoutgroupcreation"},"schema":{"href":"\/api\/v3\/work_packages\/schemas\/14-8"},"availableRelationCandidates":{"href":"\/api\/v3\/work_packages\/30105\/available_relation_candidates","title":"Potentialworkpackagestorelateto"},"activities":{"href":"\/api\/v3\/work_packages\/30105\/activities"},"relations":{"href":"\/api\/v3\/work_packages\/30105\/relations"},"revisions":{"href":"\/api\/v3\/work_packages\/30105\/revisions"},"previewMarkup":{"href":"\/api\/v3\/render\/markdown?context=\/api\/v3\/work_packages\/30105","method":"post"},"category":{"href":null},"type":{"href":"\/api\/v3\/types\/8","title":"Epic"},"priority":{"href":"\/api\/v3\/priorities\/5","title":"High"},"project":{"href":"\/api\/v3\/projects\/14","title":"OpenProject"},"status":{"href":"\/api\/v3\/statuses\/21","title":"inspecification"},"author":{"href":"\/api\/v3\/users\/49791","title":"AnthonyReddic"},"responsible":{"href":null},"assignee":{"href":"\/api\/v3\/users\/87","title":"JensUlferts"},"version":{"href":"\/api\/v3\/versions\/139","title":"ProductBacklog"},"customField110":{"title":"3.0=Significantreach(~25%to~50%)","href":"\/api\/v3\/custom_options\/415"},"customField111":{"title":"High=2x","href":"\/api\/v3\/custom_options\/419"},"customField112":{"title":"High=100%","href":"\/api\/v3\/custom_options\/423"},"customField113":{"title":"1.5(L=1-3months)","href":"\/api\/v3\/custom_options\/429"},"customField1":[{"title":"Workpackages","href":"\/api\/v3\/custom_options\/32"}],"customField102":{"href":null,"title":null},"customField129":{"href":null,"title":null},"ancestors":[],"parent":{"href":null,"title":null},"customActions":[]}}],"schemas":{"_type":"Collection","total":3,"count":3,"_embedded":{"elements":[{"_attributeGroups":[{"_type":"WorkPackageFormChildrenQueryGroup","name":"Features","relationType":"hierarchy","_embedded":{"query":{"_type":"Query","starred":false,"id":2677,"name":"Embeddedtable:Features","createdAt":"2020-10-11T16:52:33Z","updatedAt":"2020-10-11T16:52:33Z","filters":[{"_type":"TypeQueryFilter","name":"Type","_links":{"schema":{"href":"\/api\/v3\/queries\/filter_instance_schemas\/type"},"filter":{"href":"\/api\/v3\/queries\/filters\/type","title":"Type"},"operator":{"href":"\/api\/v3\/queries\/operators\/%3D","title":"is"},"values":[{"href":"\/api\/v3\/types\/6","title":"Feature"},{"href":"\/api\/v3\/types\/8","title":"Epic"}]}},{"_type":"ParentQueryFilter","name":"Parent","_links":{"schema":{"href":"\/api\/v3\/queries\/filter_instance_schemas\/parent"},"filter":{"href":"\/api\/v3\/queries\/filters\/parent","title":"Parent"},"operator":{"href":"\/api\/v3\/queries\/operators\/%3D","title":"is"},"values":[{"href":"\/api\/v3\/work_packages\/{id}","title":null,"templated":true}]}}],"sums":false,"public":false,"hidden":true,"timelineVisible":false,"showHierarchies":false,"timelineZoomLevel":"auto","timelineLabels":{},"highlightingMode":"inline","_links":{"self":{"href":"\/api\/v3\/queries\/2677","title":"Embeddedtable:Features"},"project":{"href":null},"results":{"href":"\/api\/v3\/work_packages?columns%5B%5D=id&columns%5B%5D=type&columns%5B%5D=subject&columns%5B%5D=status&columns%5B%5D=assignee&columns%5B%5D=version&columns%5B%5D=customField1&columns%5B%5D=project&columns%5B%5D=spentTime&filters=%5B%7B%22type%22%3A%7B%22operator%22%3A%22%3D%22%2C%22values%22%3A%5B%226%22%2C%228%22%5D%7D%7D%2C%7B%22parent%22%3A%7B%22operator%22%3A%22%3D%22%2C%22values%22%3A%5B%22%7Bid%7D%22%5D%7D%7D%5D&offset=1&pageSize=50&showHierarchies=false&showSums=false&sortBy=%5B%5B%22version%22%2C%22asc%22%5D%5D"},"schema":{"href":"\/api\/v3\/queries\/schema"},"update":{"href":"\/api\/v3\/queries\/2677\/form","method":"post"},"user":{"href":null},"sortBy":[{"href":"\/api\/v3\/queries\/sort_bys\/version-asc","title":"Version(Ascending)"}],"groupBy":{"href":null,"title":null},"columns":[{"href":"\/api\/v3\/queries\/columns\/id","title":"ID"},{"href":"\/api\/v3\/queries\/columns\/type","title":"Type"},{"href":"\/api\/v3\/queries\/columns\/subject","title":"Subject"},{"href":"\/api\/v3\/queries\/columns\/status","title":"Status"},{"href":"\/api\/v3\/queries\/columns\/assignee","title":"Assignee"},{"href":"\/api\/v3\/queries\/columns\/version","title":"Version"},{"href":"\/api\/v3\/queries\/columns\/customField1","title":"Module"},{"href":"\/api\/v3\/queries\/columns\/project","title":"Project"},{"href":"\/api\/v3\/queries\/columns\/spentTime","title":"Spenttime"}],"highlightedAttributes":[{"href":"\/api\/v3\/queries\/columns\/status","title":"Status"},{"href":"\/api\/v3\/queries\/columns\/priority","title":"Priority"},{"href":"\/api\/v3\/queries\/columns\/dueDate","title":"Finishdate"}]}}},"_links":{"query":{"href":"\/api\/v3\/queries\/2677","title":"Embeddedtable:Features"}}},{"_type":"WorkPackageFormChildrenQueryGroup","name":"Bugsandotherworkpackages","relationType":"hierarchy","_embedded":{"query":{"_type":"Query","starred":false,"id":2678,"name":"Embeddedtable:Bugsandotherworkpackages","createdAt":"2020-10-11T16:52:34Z","updatedAt":"2020-10-11T16:52:34Z","filters":[{"_type":"TypeQueryFilter","name":"Type","_links":{"schema":{"href":"\/api\/v3\/queries\/filter_instance_schemas\/type"},"filter":{"href":"\/api\/v3\/queries\/filters\/type","title":"Type"},"operator":{"href":"\/api\/v3\/queries\/operators\/%21","title":"isnot"},"values":[{"href":"\/api\/v3\/types\/6","title":"Feature"},{"href":"\/api\/v3\/types\/8","title":"Epic"}]}},{"_type":"ParentQueryFilter","name":"Parent","_links":{"schema":{"href":"\/api\/v3\/queries\/filter_instance_schemas\/parent"},"filter":{"href":"\/api\/v3\/queries\/filters\/parent","title":"Parent"},"operator":{"href":"\/api\/v3\/queries\/operators\/%3D","title":"is"},"values":[{"href":"\/api\/v3\/work_packages\/{id}","title":null,"templated":true}]}}],"sums":false,"public":false,"hidden":true,"timelineVisible":false,"showHierarchies":false,"timelineZoomLevel":"auto","timelineLabels":{},"highlightingMode":"inline","_links":{"self":{"href":"\/api\/v3\/queries\/2678","title":"Embeddedtable:Bugsandotherworkpackages"},"project":{"href":null},"results":{"href":"\/api\/v3\/work_packages?columns%5B%5D=id&columns%5B%5D=type&columns%5B%5D=subject&columns%5B%5D=status&columns%5B%5D=assignee&columns%5B%5D=version&columns%5B%5D=customField1&columns%5B%5D=project&columns%5B%5D=spentTime&filters=%5B%7B%22type%22%3A%7B%22operator%22%3A%22%21%22%2C%22values%22%3A%5B%226%22%2C%228%22%5D%7D%7D%2C%7B%22parent%22%3A%7B%22operator%22%3A%22%3D%22%2C%22values%22%3A%5B%22%7Bid%7D%22%5D%7D%7D%5D&offset=1&pageSize=50&showHierarchies=false&showSums=false&sortBy=%5B%5B%22id%22%2C%22asc%22%5D%5D"},"schema":{"href":"\/api\/v3\/queries\/schema"},"update":{"href":"\/api\/v3\/queries\/2678\/form","method":"post"},"user":{"href":null},"sortBy":[{"href":"\/api\/v3\/queries\/sort_bys\/id-asc","title":"ID(Ascending)"}],"groupBy":{"href":null,"title":null},"columns":[{"href":"\/api\/v3\/queries\/columns\/id","title":"ID"},{"href":"\/api\/v3\/queries\/columns\/type","title":"Type"},{"href":"\/api\/v3\/queries\/columns\/subject","title":"Subject"},{"href":"\/api\/v3\/queries\/columns\/status","title":"Status"},{"href":"\/api\/v3\/queries\/columns\/assignee","title":"Assignee"},{"href":"\/api\/v3\/queries\/columns\/version","title":"Version"},{"href":"\/api\/v3\/queries\/columns\/customField1","title":"Module"},{"href":"\/api\/v3\/queries\/columns\/project","title":"Project"},{"href":"\/api\/v3\/queries\/columns\/spentTime","title":"Spenttime"}],"highlightedAttributes":[{"href":"\/api\/v3\/queries\/columns\/status","title":"Status"},{"href":"\/api\/v3\/queries\/columns\/priority","title":"Priority"},{"href":"\/api\/v3\/queries\/columns\/dueDate","title":"Finishdate"}]}}},"_links":{"query":{"href":"\/api\/v3\/queries\/2678","title":"Embeddedtable:Bugsandotherworkpackages"}}},{"_type":"WorkPackageFormAttributeGroup","name":"Details","attributes":["date","percentageDone","priority","version","position","customField1","customField108"]},{"_type":"WorkPackageFormAttributeGroup","name":"People","attributes":["assignee","responsible","customField102","customField129"]},{"_type":"WorkPackageFormAttributeGroup","name":"Estimatesandtime","attributes":["estimatedTime","spentTime","storyPoints"]},{"_type":"WorkPackageFormAttributeGroup","name":"RICEprioritization","attributes":["customField110","customField111","customField112","customField113","customField114","customField130"]}],"_type":"Schema","_dependencies":[],"lockVersion":{"type":"Integer","name":"LockVersion","required":true,"hasDefault":false,"writable":false,"options":{}},"id":{"type":"Integer","name":"ID","required":true,"hasDefault":false,"writable":false,"options":{}},"subject":{"type":"String","name":"Subject","required":true,"hasDefault":false,"writable":false,"minLength":1,"maxLength":255,"options":{}},"description":{"type":"Formattable","name":"Description","required":false,"hasDefault":false,"writable":false,"options":{}},"scheduleManually":{"type":"Boolean","name":"Manualscheduling","required":false,"hasDefault":true,"writable":false,"options":{}},"startDate":{"type":"Date","name":"Startdate","required":false,"hasDefault":false,"writable":false,"options":{}},"dueDate":{"type":"Date","name":"Finishdate","required":false,"hasDefault":false,"writable":false,"options":{}},"derivedStartDate":{"type":"Date","name":"Derivedstartdate","required":false,"hasDefault":false,"writable":false,"options":{}},"derivedDueDate":{"type":"Date","name":"Derivedfinishdate","required":false,"hasDefault":false,"writable":false,"options":{}},"estimatedTime":{"type":"Duration","name":"Estimatedtime","required":false,"hasDefault":false,"writable":false,"attributeGroup":"Estimatesandtime","options":{}},"derivedEstimatedTime":{"type":"Duration","name":"Derivedestimatedtime","required":false,"hasDefault":false,"writable":false,"options":{}},"createdAt":{"type":"DateTime","name":"Createdon","required":true,"hasDefault":false,"writable":false,"options":{}},"updatedAt":{"type":"DateTime","name":"Updatedon","required":true,"hasDefault":false,"writable":false,"options":{}},"author":{"type":"User","name":"Author","required":true,"hasDefault":false,"writable":false,"options":{}},"project":{"type":"Project","name":"Project","required":true,"hasDefault":false,"writable":false,"_links":{}},"parent":{"type":"WorkPackage","name":"Parent","required":false,"hasDefault":false,"writable":true,"options":{}},"assignee":{"type":"User","name":"Assignee","required":false,"hasDefault":false,"writable":false,"attributeGroup":"People","_links":{}},"responsible":{"type":"User","name":"Accountable","required":false,"hasDefault":false,"writable":false,"attributeGroup":"People","_links":{}},"type":{"type":"Type","name":"Type","required":true,"hasDefault":false,"writable":false,"_links":{}},"status":{"type":"Status","name":"Status","required":true,"hasDefault":true,"writable":false,"_links":{}},"category":{"type":"Category","name":"Category","required":false,"hasDefault":false,"writable":false,"_links":{}},"version":{"type":"Version","name":"Version","required":false,"hasDefault":false,"writable":false,"attributeGroup":"Details","_links":{}},"priority":{"type":"Priority","name":"Priority","required":true,"hasDefault":true,"writable":false,"attributeGroup":"Details","_links":{}},"overallCosts":{"type":"String","name":"Overallcosts","required":false,"hasDefault":false,"writable":false,"options":{}},"laborCosts":{"type":"String","name":"Laborcosts","required":false,"hasDefault":false,"writable":false,"options":{}},"materialCosts":{"type":"String","name":"Unitcosts","required":false,"hasDefault":false,"writable":false,"options":{}},"costsByType":{"type":"Collection","name":"Spentunits","required":false,"hasDefault":false,"writable":false,"options":{}},"position":{"type":"Integer","name":"Position","required":false,"hasDefault":false,"writable":false,"attributeGroup":"Details","options":{}},"storyPoints":{"type":"Integer","name":"StoryPoints","required":false,"hasDefault":false,"writable":false,"attributeGroup":"Estimatesandtime","options":{}},"remainingTime":{"type":"Duration","name":"Remaininghours","required":false,"hasDefault":false,"writable":false,"options":{}},"customField130":{"type":"Integer","name":"Votes","required":false,"hasDefault":false,"writable":true,"attributeGroup":"RICEprioritization","options":{"rtl":null}},"customField1":{"type":"[]CustomOption","name":"Module","required":false,"hasDefault":false,"writable":true,"attributeGroup":"Details","_links":{}},"customField110":{"type":"CustomOption","name":"Reach","required":false,"hasDefault":false,"writable":true,"attributeGroup":"RICEprioritization","_links":{}},"customField111":{"type":"CustomOption","name":"Impact","required":false,"hasDefault":false,"writable":true,"attributeGroup":"RICEprioritization","_links":{}},"customField112":{"type":"CustomOption","name":"Confidence","required":false,"hasDefault":false,"writable":true,"attributeGroup":"RICEprioritization","_links":{}},"customField113":{"type":"CustomOption","name":"Effort(shirtsize)","required":false,"hasDefault":false,"writable":true,"attributeGroup":"RICEprioritization","_links":{}},"customField114":{"type":"Float","name":"RICEScore","required":false,"hasDefault":false,"writable":true,"attributeGroup":"RICEprioritization","options":{"rtl":null}},"customField102":{"type":"User","name":"Orderedby","required":false,"hasDefault":false,"writable":true,"attributeGroup":"People","_links":{}},"customField108":{"type":"Boolean","name":"Requiresdocchange","required":false,"hasDefault":false,"writable":true,"attributeGroup":"Details","options":{"rtl":null}},"customField129":{"type":"User","name":"Signedoffby","required":false,"hasDefault":false,"writable":true,"attributeGroup":"People","_links":{}},"_links":{"self":{"href":"\/api\/v3\/work_packages\/schemas\/14-8"}}},{"_attributeGroups":[{"_type":"WorkPackageFormAttributeGroup","name":"RICEPrioritization","attributes":["customField110","customField111","customField112","customField113","customField114","customField130","customField127"]},{"_type":"WorkPackageFormAttributeGroup","name":"Details","attributes":["date","priority","version","customField1","customField108"]},{"_type":"WorkPackageFormAttributeGroup","name":"People","attributes":["assignee","responsible","customField102","customField129"]},{"_type":"WorkPackageFormAttributeGroup","name":"Estimatesandtime","attributes":["estimatedTime","laborCosts","spentTime"]}],"_type":"Schema","_dependencies":[],"lockVersion":{"type":"Integer","name":"LockVersion","required":true,"hasDefault":false,"writable":false,"options":{}},"id":{"type":"Integer","name":"ID","required":true,"hasDefault":false,"writable":false,"options":{}},"subject":{"type":"String","name":"Subject","required":true,"hasDefault":false,"writable":false,"minLength":1,"maxLength":255,"options":{}},"description":{"type":"Formattable","name":"Description","required":false,"hasDefault":false,"writable":false,"options":{}},"scheduleManually":{"type":"Boolean","name":"Manualscheduling","required":false,"hasDefault":true,"writable":false,"options":{}},"startDate":{"type":"Date","name":"Startdate","required":false,"hasDefault":false,"writable":false,"options":{}},"dueDate":{"type":"Date","name":"Finishdate","required":false,"hasDefault":false,"writable":false,"options":{}},"derivedStartDate":{"type":"Date","name":"Derivedstartdate","required":false,"hasDefault":false,"writable":false,"options":{}},"derivedDueDate":{"type":"Date","name":"Derivedfinishdate","required":false,"hasDefault":false,"writable":false,"options":{}},"estimatedTime":{"type":"Duration","name":"Estimatedtime","required":false,"hasDefault":false,"writable":false,"attributeGroup":"Estimatesandtime","options":{}},"derivedEstimatedTime":{"type":"Duration","name":"Derivedestimatedtime","required":false,"hasDefault":false,"writable":false,"options":{}},"createdAt":{"type":"DateTime","name":"Createdon","required":true,"hasDefault":false,"writable":false,"options":{}},"updatedAt":{"type":"DateTime","name":"Updatedon","required":true,"hasDefault":false,"writable":false,"options":{}},"author":{"type":"User","name":"Author","required":true,"hasDefault":false,"writable":false,"options":{}},"project":{"type":"Project","name":"Project","required":true,"hasDefault":false,"writable":false,"_links":{}},"parent":{"type":"WorkPackage","name":"Parent","required":false,"hasDefault":false,"writable":true,"options":{}},"assignee":{"type":"User","name":"Assignee","required":false,"hasDefault":false,"writable":false,"attributeGroup":"People","_links":{}},"responsible":{"type":"User","name":"Accountable","required":false,"hasDefault":false,"writable":false,"attributeGroup":"People","_links":{}},"type":{"type":"Type","name":"Type","required":true,"hasDefault":false,"writable":false,"_links":{}},"status":{"type":"Status","name":"Status","required":true,"hasDefault":true,"writable":false,"_links":{}},"category":{"type":"Category","name":"Category","required":false,"hasDefault":false,"writable":false,"_links":{}},"version":{"type":"Version","name":"Version","required":false,"hasDefault":false,"writable":false,"attributeGroup":"Details","_links":{}},"priority":{"type":"Priority","name":"Priority","required":true,"hasDefault":true,"writable":false,"attributeGroup":"Details","_links":{}},"overallCosts":{"type":"String","name":"Overallcosts","required":false,"hasDefault":false,"writable":false,"options":{}},"laborCosts":{"type":"String","name":"Laborcosts","required":false,"hasDefault":false,"writable":false,"attributeGroup":"Estimatesandtime","options":{}},"materialCosts":{"type":"String","name":"Unitcosts","required":false,"hasDefault":false,"writable":false,"options":{}},"costsByType":{"type":"Collection","name":"Spentunits","required":false,"hasDefault":false,"writable":false,"options":{}},"position":{"type":"Integer","name":"Position","required":false,"hasDefault":false,"writable":false,"options":{}},"storyPoints":{"type":"Integer","name":"StoryPoints","required":false,"hasDefault":false,"writable":false,"options":{}},"remainingTime":{"type":"Duration","name":"Remaininghours","required":false,"hasDefault":false,"writable":false,"options":{}},"customField127":{"type":"[]CustomOption","name":"Codelayer","required":false,"hasDefault":false,"writable":true,"attributeGroup":"RICEPrioritization","_links":{}},"customField112":{"type":"CustomOption","name":"Confidence","required":false,"hasDefault":false,"writable":true,"attributeGroup":"RICEPrioritization","_links":{}},"customField113":{"type":"CustomOption","name":"Effort(shirtsize)","required":false,"hasDefault":false,"writable":true,"attributeGroup":"RICEPrioritization","_links":{}},"customField111":{"type":"CustomOption","name":"Impact","required":false,"hasDefault":false,"writable":true,"attributeGroup":"RICEPrioritization","_links":{}},"customField1":{"type":"[]CustomOption","name":"Module","required":false,"hasDefault":false,"writable":true,"attributeGroup":"Details","_links":{}},"customField102":{"type":"User","name":"Orderedby","required":false,"hasDefault":false,"writable":true,"attributeGroup":"People","_links":{}},"customField110":{"type":"CustomOption","name":"Reach","required":false,"hasDefault":false,"writable":true,"attributeGroup":"RICEPrioritization","_links":{}},"customField108":{"type":"Boolean","name":"Requiresdocchange","required":false,"hasDefault":false,"writable":true,"attributeGroup":"Details","options":{"rtl":null}},"customField114":{"type":"Float","name":"RICEScore","required":false,"hasDefault":false,"writable":true,"attributeGroup":"RICEPrioritization","options":{"rtl":null}},"customField129":{"type":"User","name":"Signedoffby","required":false,"hasDefault":false,"writable":true,"attributeGroup":"People","_links":{}},"customField130":{"type":"Integer","name":"Votes","required":false,"hasDefault":false,"writable":true,"attributeGroup":"RICEPrioritization","options":{"rtl":null}},"_links":{"self":{"href":"\/api\/v3\/work_packages\/schemas\/14-6"}}},{"_attributeGroups":[{"_type":"WorkPackageFormAttributeGroup","name":"Details","attributes":["date","priority","customField1","version","customField5","customField108","customField127"]},{"_type":"WorkPackageFormAttributeGroup","name":"People","attributes":["assignee","customField107","customField102","customField129"]},{"_type":"WorkPackageFormAttributeGroup","name":"Costs","attributes":["estimatedTime","spentTime","laborCosts"]}],"_type":"Schema","_dependencies":[],"lockVersion":{"type":"Integer","name":"LockVersion","required":true,"hasDefault":false,"writable":false,"options":{}},"id":{"type":"Integer","name":"ID","required":true,"hasDefault":false,"writable":false,"options":{}},"subject":{"type":"String","name":"Subject","required":true,"hasDefault":false,"writable":false,"minLength":1,"maxLength":255,"options":{}},"description":{"type":"Formattable","name":"Description","required":false,"hasDefault":false,"writable":false,"options":{}},"scheduleManually":{"type":"Boolean","name":"Manualscheduling","required":false,"hasDefault":true,"writable":false,"options":{}},"startDate":{"type":"Date","name":"Startdate","required":false,"hasDefault":false,"writable":false,"options":{}},"dueDate":{"type":"Date","name":"Finishdate","required":false,"hasDefault":false,"writable":false,"options":{}},"derivedStartDate":{"type":"Date","name":"Derivedstartdate","required":false,"hasDefault":false,"writable":false,"options":{}},"derivedDueDate":{"type":"Date","name":"Derivedfinishdate","required":false,"hasDefault":false,"writable":false,"options":{}},"estimatedTime":{"type":"Duration","name":"Estimatedtime","required":false,"hasDefault":false,"writable":false,"attributeGroup":"Costs","options":{}},"derivedEstimatedTime":{"type":"Duration","name":"Derivedestimatedtime","required":false,"hasDefault":false,"writable":false,"options":{}},"createdAt":{"type":"DateTime","name":"Createdon","required":true,"hasDefault":false,"writable":false,"options":{}},"updatedAt":{"type":"DateTime","name":"Updatedon","required":true,"hasDefault":false,"writable":false,"options":{}},"author":{"type":"User","name":"Author","required":true,"hasDefault":false,"writable":false,"options":{}},"project":{"type":"Project","name":"Project","required":true,"hasDefault":false,"writable":false,"_links":{}},"parent":{"type":"WorkPackage","name":"Parent","required":false,"hasDefault":false,"writable":true,"options":{}},"assignee":{"type":"User","name":"Assignee","required":false,"hasDefault":false,"writable":false,"attributeGroup":"People","_links":{}},"responsible":{"type":"User","name":"Accountable","required":false,"hasDefault":false,"writable":false,"_links":{}},"type":{"type":"Type","name":"Type","required":true,"hasDefault":false,"writable":false,"_links":{}},"status":{"type":"Status","name":"Status","required":true,"hasDefault":true,"writable":false,"_links":{}},"category":{"type":"Category","name":"Category","required":false,"hasDefault":false,"writable":false,"_links":{}},"version":{"type":"Version","name":"Version","required":false,"hasDefault":false,"writable":false,"attributeGroup":"Details","_links":{}},"priority":{"type":"Priority","name":"Priority","required":true,"hasDefault":true,"writable":false,"attributeGroup":"Details","_links":{}},"overallCosts":{"type":"String","name":"Overallcosts","required":false,"hasDefault":false,"writable":false,"options":{}},"laborCosts":{"type":"String","name":"Laborcosts","required":false,"hasDefault":false,"writable":false,"attributeGroup":"Costs","options":{}},"materialCosts":{"type":"String","name":"Unitcosts","required":false,"hasDefault":false,"writable":false,"options":{}},"costsByType":{"type":"Collection","name":"Spentunits","required":false,"hasDefault":false,"writable":false,"options":{}},"position":{"type":"Integer","name":"Position","required":false,"hasDefault":false,"writable":false,"options":{}},"storyPoints":{"type":"Integer","name":"StoryPoints","required":false,"hasDefault":false,"writable":false,"options":{}},"remainingTime":{"type":"Duration","name":"Remaininghours","required":false,"hasDefault":false,"writable":false,"options":{}},"customField1":{"type":"[]CustomOption","name":"Module","required":false,"hasDefault":false,"writable":true,"attributeGroup":"Details","_links":{}},"customField5":{"type":"CustomOption","name":"Bugfoundinversion","required":false,"hasDefault":false,"writable":true,"attributeGroup":"Details","_links":{}},"customField107":{"type":"[]CustomOption","name":"Prioboard","required":false,"hasDefault":false,"writable":true,"attributeGroup":"People","_links":{}},"customField108":{"type":"Boolean","name":"Requiresdocchange","required":false,"hasDefault":false,"writable":true,"attributeGroup":"Details","options":{"rtl":null}},"customField102":{"type":"User","name":"Orderedby","required":false,"hasDefault":false,"writable":true,"attributeGroup":"People","_links":{}},"customField127":{"type":"[]CustomOption","name":"Codelayer","required":false,"hasDefault":false,"writable":true,"attributeGroup":"Details","_links":{}},"customField129":{"type":"User","name":"Signedoffby","required":false,"hasDefault":false,"writable":true,"attributeGroup":"People","_links":{}},"_links":{"self":{"href":"\/api\/v3\/work_packages\/schemas\/14-1"}}}]},"_links":{"self":{"href":"\/api\/v3\/work_packages\/schemas?filters=%5B%7B%3Aid%3D%3E%7B%3Aoperator%3D%3E%22%3D%22%2C+%3Avalues%3D%3E%5B%2214-8%22%2C+%2214-6%22%2C+%2214-1%22%5D%7D%7D%5D"}}}},"_links":{"self":{"href":"\/api\/v3\/work_packages?filters=%5B%7B%22status%22%3A%7B%22operator%22%3A%22%3D%22%2C%22values%22%3A%5B%2221%22%5D%7D%7D%2C%7B%22updatedAt%22%3A%7B%22operator%22%3A%22%3C%3Ed%22%2C%22values%22%3A%5B%222019-06-10T22%3A00%3A00Z%22%2C%222021-06-14T22%3A00%3A00Z%22%5D%7D%7D%5D&offset=1&pageSize=50&showHierarchies=true&showSums=false&sortBy=%5B%5B%22id%22%2C%22asc%22%5D%5D"},"jumpTo":{"href":"\/api\/v3\/work_packages?filters=%5B%7B%22status%22%3A%7B%22operator%22%3A%22%3D%22%2C%22values%22%3A%5B%2221%22%5D%7D%7D%2C%7B%22updatedAt%22%3A%7B%22operator%22%3A%22%3C%3Ed%22%2C%22values%22%3A%5B%222019-06-10T22%3A00%3A00Z%22%2C%222021-06-14T22%3A00%3A00Z%22%5D%7D%7D%5D&offset=%7Boffset%7D&pageSize=50&showHierarchies=true&showSums=false&sortBy=%5B%5B%22id%22%2C%22asc%22%5D%5D","templated":true},"changeSize":{"href":"\/api\/v3\/work_packages?filters=%5B%7B%22status%22%3A%7B%22operator%22%3A%22%3D%22%2C%22values%22%3A%5B%2221%22%5D%7D%7D%2C%7B%22updatedAt%22%3A%7B%22operator%22%3A%22%3C%3Ed%22%2C%22values%22%3A%5B%222019-06-10T22%3A00%3A00Z%22%2C%222021-06-14T22%3A00%3A00Z%22%5D%7D%7D%5D&offset=1&pageSize=%7Bsize%7D&showHierarchies=true&showSums=false&sortBy=%5B%5B%22id%22%2C%22asc%22%5D%5D","templated":true},"schemas":{"href":"\/api\/v3\/work_packages\/schemas?filters=%5B%7B%3Aid%3D%3E%7B%3Aoperator%3D%3E%22%3D%22%2C+%3Avalues%3D%3E%5B%2214-8%22%2C+%2214-6%22%2C+%2214-1%22%5D%7D%7D%5D"}}}`

func TestWorkPackageService_Get_Success(t *testing.T) {
	setup()
	defer teardown()
	testMux.HandleFunc("/api/v3/work_packages/36350", func(w http.ResponseWriter, r *http.Request) {
		testMethod(t, r, "GET")
		testRequestURL(t, r, "/api/v3/work_packages/36350")

		fmt.Fprint(w, testWorkPackageGETResponse)
	})

	workpkg, _, err := testClient.WorkPackage.Get("36350")
	if workpkg == nil {
		t.Error("Expected work-package. Work-package is nil")
	}
	if err != nil {
		t.Errorf("Error given: %s", err)
	}
}

func TestWorkPackageService_Get_SearchListSuccess(t *testing.T) {
	setup()
	defer teardown()
	testMux.HandleFunc("/api/v3/work_packages", func(w http.ResponseWriter, r *http.Request) {
		testMethod(t, r, "GET")
		testRequestURL(t, r, "/api/v3/work_packages?filters=%5B%7B%22status%22%3A%7B%22operator%22%3A%22%3D%22%2C%22values%22%3A%5B%2221%22%5D%7D%7D%5D")

		fmt.Fprint(w, testWorkPackageGETListResponse)
	})

	opt := &FilterOptions{
		Fields: []OptionsFields{
			{
				Field:    "status",
				Operator: EQUAL,
				Value:    "21",
			},
		},
	}

	_, resp, err := testClient.WorkPackage.GetList(opt)

	if resp == nil {
		t.Errorf("Null response: %+v", resp)
	}
	if err != nil {
		t.Errorf("Error given: %s", err)
	}
	if resp.Total != 2 {
		t.Errorf("Total should populate with 2, %v given", resp.Total)
	}
}

func TestWorkPackageService_Create(t *testing.T) {
	setup()
	defer teardown()
	testMux.HandleFunc("/api/v3/projects/demo-project/work_packages", func(w http.ResponseWriter, r *http.Request) {
		testMethod(t, r, "POST")
		testRequestURL(t, r, "/api/v3/projects/demo-project/work_packages")

		w.WriteHeader(http.StatusCreated)
		fmt.Fprint(w, testWorkPackagePOSTResponse)
	})

	i := &WorkPackage{
		Subject: "Just another test work-package",
		Description: &WPDescription{
			Format: "textile",
			Raw:    "This is just a demo work-package description",
		},
	}
	issue, _, err := testClient.WorkPackage.Create(i, "demo-project")
	if issue == nil {
		t.Error("Expected work-package. Work-package is nil")
	}
	if err != nil {
		t.Errorf("Error given: %s", err)
	}
}
